<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>Football</title>
    <link rel="stylesheet" type="text/css" href="styles/football.css"/>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="styles/jquery.datetimepicker.min.css"/>


    <script src="scripts/jquery-3.1.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="scripts/football.js"></script>
    <script src="scripts/jquery.datetimepicker.full.js"></script>
    <script src="scripts/youtube.js"></script>
</head>

<body onload="startApp()">

<div id="app">
    <header id="menu">

        <a href="#" class="anonymous" id="linkMenuAppHome">Начало</a>
        <a href="#" class="useronly" id="linkMenuRules">Регламент</a>
        <a href="#" class="useronly" id="linkMenuAllMatches">Мачове</a>
        <a href="#" class="useronly" id="linkMenuRankings2017">Класиране 2017</a>
        <a href="#" class="useronly" id="linkMenuRankings2018">Класиране 2018</a>
        <a href="#" class="useronly" id="linkMenuRankings2019">Класиране 2019</a>



        <span class="useronly" id="spanMenuLoggedInUser">Здрасти, {user}!</span>
    </header>

    <main>
        <div id="loadingBox">Loading ...</div>

        <div id="infoBox">Info</div>

        <div id="errorBox">Error</div>

        <section id="viewAppHome">
            <h1>Футбол</h1>

            <h3>
                От 1 януари 2019 година статистиката е нулирана. Променена е формулата за изчисляване на точките.
            </h3>
            <p>                Вече за всеки играч се изчисляват персонално точки. Това става, като се вземе средноаритметияния ранг на петимата му съотборници и се съпостави със средноаритметичния ранг на шестимата съперника. 
                </p>
                <p>                Ето и отново кратко обяснение как работи формулата:
                    </p>

<p>                Точките зависят от две неща:
    </p>

                    <br/>1. От головата разлика в съответния мач
                    <br/>2. От това дали играеш срещу по-силни или по-слаби съоперници.

                <p>                Съответно в зависимост от това се формира коефициент, който може да увеличи или намали базовия брой точки.
                    </p>
<p>                За по-подробно обяснение на формулата и как се формират коефициента и базовият брой точки за победа, равен и загуба, вижте регламента.
    </p>            

        </section>

        <section id="viewRules">
            <h1>Регламент</h1>

            <p>Този сайт показва индивидуално класиране по точки на играчите. Точките се изчисляват чрез две формули, които целят да се постигне относително високо ниво на обективност.</p>
            <p>Формулите използват изцяло и единствено резултатите от изиграните от играчите мачове. Има значение единствено крайният резултат, без индивидуалните постижения (голове, асистенции и т.н.). Всички играчи от отбора в съответният мач получават еднакъв брой точки.</p>
            <p>Първата и по-обективна формула изчислява ранк на играчите след всеки изигран мач. Победителят взима определен брой точки, загубилият губи същият брой точки. Така се получава индивидуален ранг на играчите. В този ранк играчите с повече изиграни мачове нямат предимство пред други с по-малко мачове.</p>

            <p>Всеки нов играч започва с базов (нулев) ранг = 1000. След всеки мач победителят качва ранга си, а загубилият го намалява със съответният брой точки.</p>

            <p>Формулата за изчисляване на ранга съобразява разликата в силата между двата отбора, като я преобразува в хендикап във формата на голове. Така към реалния резултат по-слабият отбор получава бонус голове и след това се смятат реалните точки.</p>
            <p>точки за победителя = 10 + goalDifference</p>
            <p>точки за загубилия =  -5 – goalDifference</p>
            <p>точки при равенство =  5 </p>

            <p>handicap = (team1rank - team2rank) / 50</p>

            <p>точки за фаворита = точки – хендикап</p>
            <p>точки за аутсайдера = точки + хендикап</p>


            <p>Отделно от ранга се изчислява и класиране по точки. В този случай загубилият отбор не може да загуби точки, в най-лошият случай взима 0. В това класиране играчите с повече мачове имат предимство пред тези с по-малко. Това класиране не отразява толкова обективно силата на играчите, но е по-близо до реалните класирания в истинските футболни първенства, в никое от което загубилият отбор/играч не получава отрицателни точки.</p>


            <p>Дори и в класирането по точки обаче се търси високо ниво на обективност. Тя се постига, като преди всеки мач се изчислява отбор фаворит и отбор аутсайдер, въз основа на вече получения обективен ранг. Сумира се рангът на 6-те играча от първия отбор, съответно на втория и се гледа разликата. Тази разлика се преобразува под формата на коефициент. За по-силния отбор този коефициент може да бъде между 0.5 и 1.00, докато за по-слабия може да бъде между 1.00 и 2.00. След изчисляване на точките на двата отбора те се умножават с този коефициент.</p>

            <p><b>Точки се получават както от победителя, така и от загубилия отбор.</b></p>

            <p>Точки за отбор победител = 10 + голова разлика.</p>
            <p>Точки за загубилия отбор = 10 – голова разлика.</p>

            <p>Головата разлика има таван = 10. Загубилият отбор не може да има отрицателни точки.</p>


            <p>GoalDifference  max = 10</p>
            <p>rankDifference  max = 300</p>



            <p>coefficientStrongerTeam = 150 / (150 + rankDifference) </p>
            <p>coefficientWeakerTeam = (150 + rankDifference) / 150</p>


            <p>points for winner = (10 + goalDifference) * coefficientTeamOne</p>
            <p>points for loser = ((5 - goalDifference) * coefficientTeamTwo</p>

            </p>

        </section>

        <section id="viewUserHome">
            <h1 id="viewUserHomeHeading">Welcome, {user}!</h1>

        </section>

        <section id="viewAllMatches">
            <h1>Мачове</h1>

            <div class="matches" id="listAllMatches">
                <table>
                    <thead>
                    <tr>
                        <th>N</th>
                        <th>Отбор 1</th>
                        <th>Резултат</th>
                        <th>Отбор 2</th>
                        <th>Дата</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- TODO: more messages will come here -->
                    </tbody>
                </table>
            </div>
        </section>

        <section id="viewSingleMatch">

            <div class="singleMatch" id="showSingleMatch">

            </div>

        </section>

        <section id="viewAllPlayers">
            <h1>Играчи</h1>
            <div class="players" id="listAllPlayers">
                <table>
                    <thead>
                    <tr>
                        <th>N</th>
                        <th>Име</th>
                        <th>Ранг</th>
                        <th>Мачове</th>
                        <th>Победи</th>
                        <th>Равни</th>
                        <th>Загуби</th>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="viewRankings2017">
            <h1>Играчи</h1>
            <div class="players" id="listRankings2017">
                <table>
                    <thead>
                    <tr>
                        <th>N</th>
                        <th>Име</th>
                        <th>Ранг</th>
                        <th>Мачове</th>
                        <th>Победи</th>
                        <th>Равни</th>
                        <th>Загуби</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- TODO: more messages will come here -->
                    </tbody>
                </table>
            </div>
        </section>

        <section id="viewRankings2018">
            <h1>Играчи</h1>
            <div class="players" id="listRankings2018">
                <table>
                    <thead>
                    <tr>
                        <th>N</th>
                        <th>Име</th>
                        <th>Ранг</th>
                        <th>Мачове</th>
                        <th>Победи</th>
                        <th>Равни</th>
                        <th>Загуби</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- TODO: more messages will come here -->
                    </tbody>
                </table>
            </div>
        </section>

        <section id="viewSinglePlayer">
            <div class="singlePlayer" id="showSinglePlayer">
            </div>

        </section>

    </main>

    <footer>Футбол Liophy - Simple SPA Application</footer>
</div>

</body>

</html>
